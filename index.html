<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0a0a0f" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Milestone" />
  <title>Milestone Counter</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="dark" data-theme="dark">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: Timer List
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-list" class="screen active">
    <header class="app-header">
      <div class="header-left">
        <h1 class="app-title">Milestone</h1>
      </div>
      <div class="header-right">
        <button id="theme-toggle" class="icon-btn" aria-label="Toggle light/dark mode">
          <span class="icon-sun">â˜€</span>
          <span class="icon-moon">â˜½</span>
        </button>
        <button id="btn-new-timer" class="icon-btn" aria-label="Add new timer">ï¼‹</button>
      </div>
    </header>

    <div id="empty-state" class="empty-state hidden">
      <div class="empty-icon">â±</div>
      <p class="empty-title">No timers yet</p>
      <p class="empty-sub">Tap ï¼‹ to create your first milestone</p>
    </div>

    <ul id="timer-list" class="timer-list" role="list"></ul>
  </div>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: Timer Detail
       The wallpaper sits as a full-bleed background
       behind this screen. JS sets it via inline style.
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-detail" class="screen no-wallpaper">

    <!-- Wallpaper layer â€” sits behind everything else -->
    <div id="detail-wallpaper" class="detail-wallpaper" aria-hidden="true"></div>

    <!-- Dark overlay that ensures digits are always readable -->
    <div class="detail-wallpaper-scrim" aria-hidden="true"></div>

    <!-- Content sits above the wallpaper layers -->
    <div class="detail-content">
      <header class="app-header app-header--transparent">
        <button id="btn-back" class="icon-btn back-btn" aria-label="Back to timer list">â†</button>
        <h2 id="detail-timer-name" class="detail-name"></h2>
        <button id="btn-edit-timer" class="icon-btn" aria-label="Edit this timer">âœ</button>
      </header>

      <p id="detail-mode-label" class="mode-label"></p>
      <p id="detail-target-date" class="target-date"></p>

      <!-- Hero display: months Â· weeks Â· days Â· hours -->
      <div class="countdown-hero" id="countdown-hero" aria-live="polite" aria-atomic="true">
        <div class="time-block">
          <span id="disp-months" class="time-value">0</span>
          <span class="time-label">months</span>
        </div>
        <div class="time-separator">Â·</div>
        <div class="time-block">
          <span id="disp-weeks" class="time-value">0</span>
          <span class="time-label">weeks</span>
        </div>
        <div class="time-separator">Â·</div>
        <div class="time-block">
          <span id="disp-days" class="time-value">0</span>
          <span class="time-label">days</span>
        </div>
        <div class="time-separator">Â·</div>
        <div class="time-block">
          <span id="disp-hours" class="time-value">0</span>
          <span class="time-label">hours</span>
        </div>
      </div>

      <p id="next-milestone-hint" class="next-milestone-hint"></p>

      <!-- Message displayed when within a message window -->
      <div id="detail-message" class="detail-message hidden"></div>
    </div>
  </div>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: Add / Edit Timer
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-form" class="screen">
    <header class="app-header">
      <button id="btn-form-cancel" class="icon-btn back-btn" aria-label="Cancel">â†</button>
      <h2 id="form-screen-title" class="detail-name">New Timer</h2>
      <div class="header-placeholder"></div>
    </header>

    <form id="timer-form" class="timer-form" novalidate>

      <label class="form-label" for="input-name">Timer name</label>
      <input
        id="input-name"
        class="form-input"
        type="text"
        placeholder="e.g. Weeks since surgery"
        maxlength="48"
        autocomplete="off"
        required
      />

      <label class="form-label" for="input-date">Date</label>
      <input
        id="input-date"
        class="form-input"
        type="date"
        required
      />

      <label class="form-label">Mode</label>
      <div class="mode-toggle-group" role="group" aria-label="Timer mode">
        <button type="button" class="mode-toggle-btn active" data-mode="countdown">Countdown to</button>
        <button type="button" class="mode-toggle-btn" data-mode="countup">Count up from</button>
      </div>

      <!-- â”€â”€ Wallpaper picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Two tabs: Built-in themes | Your photo
      â”€â”€ -->
      <label class="form-label">Background image</label>
      <div class="wallpaper-picker">

        <!-- Tab bar -->
        <div class="wp-tabs" role="tablist">
          <button type="button" class="wp-tab active" data-tab="builtin" role="tab" aria-selected="true">
            Built-in themes
          </button>
          <button type="button" class="wp-tab" data-tab="photo" role="tab" aria-selected="false">
            Your photo
          </button>
        </div>

        <!-- Tab: built-in themes -->
        <div id="wp-panel-builtin" class="wp-panel" role="tabpanel">
          <!-- Theme grids are built by JS; one section per category -->
          <div id="wp-theme-grid" class="wp-theme-grid"></div>
          <!-- "None" option to clear any wallpaper -->
          <button type="button" id="btn-wp-none" class="wp-none-btn">âœ• No background</button>
        </div>

        <!-- Tab: your photo -->
        <div id="wp-panel-photo" class="wp-panel hidden" role="tabpanel">
          <!-- Preview of the current photo (shown once one is chosen) -->
          <div id="wp-photo-preview" class="wp-photo-preview hidden">
            <button type="button" id="btn-wp-adjust-photo" class="wp-adjust-btn">â¤¢ Adjust position &amp; zoom</button>
            <img id="wp-preview-img" class="wp-preview-img" alt="Your chosen background" />
            <button type="button" id="btn-wp-remove-photo" class="wp-remove-photo-btn">âœ• Remove photo</button>
          </div>

          <!-- Upload prompt (shown when no photo is set) -->
          <label id="wp-upload-label" class="wp-upload-label" for="input-wp-photo">
            <span class="wp-upload-icon">ğŸ“·</span>
            <span class="wp-upload-text">Tap to choose a photo</span>
            <span class="wp-upload-sub">Saved inside the app â€” works offline</span>
          </label>
          <!-- The actual file input â€” hidden, triggered by the label above -->
          <input
            id="input-wp-photo"
            type="file"
            accept="image/*"
            class="visually-hidden"
          />
        </div>

      </div><!-- /.wallpaper-picker -->

      <!-- Preset milestones -->
      <label class="form-label">Preset milestones</label>
      <div id="milestone-checkboxes" class="milestone-checkboxes"></div>

      <!-- Custom milestones -->
      <label class="form-label">Custom milestones</label>
      <p class="form-hint">Add any day number not covered above â€” e.g. Day 42, Day 250</p>
      <div class="custom-milestone-input-row">
        <input
          id="input-custom-days"
          class="form-input custom-days-input"
          type="number"
          min="1"
          max="9999"
          placeholder="e.g. 42"
          autocomplete="off"
        />
        <button type="button" id="btn-add-custom-milestone" class="add-custom-btn">Add</button>
      </div>
      <div id="custom-milestone-list" class="custom-milestone-list"></div>

      <!-- â”€â”€ Messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Each message is shown on the detail screen
           below the time display, from a set number of
           days before a chosen milestone.
      â”€â”€ -->
      <label class="form-label">Messages</label>
      <p class="form-hint">Add a message to display on the timer screen from a chosen number of days before a milestone â€” e.g. "Buy a card and gift" from 14 days before the 1 Year mark.</p>

      <!-- Message builder inputs -->
      <div class="message-builder">
        <textarea
          id="input-message-text"
          class="form-input message-text-input"
          placeholder="e.g. Buy a card and gift for wife"
          rows="2"
        ></textarea>

        <div class="message-builder-row">
          <label class="message-builder-label">Show from</label>
          <input
            id="input-message-days"
            class="form-input message-days-input"
            type="number"
            min="1"
            max="365"
            placeholder="e.g. 14"
          />
          <label class="message-builder-label">days before</label>
        </div>

        <select id="input-message-milestone" class="form-input message-milestone-select">
          <option value="">â€” choose a milestone â€”</option>
        </select>

        <button type="button" id="btn-add-message" class="add-custom-btn message-add-btn">Add message</button>
      </div>

      <!-- List of added messages -->
      <div id="message-list" class="message-list"></div>

      <div class="form-actions">
        <button type="submit" id="btn-form-save" class="primary-btn">Save Timer</button>
        <button type="button" id="btn-form-delete" class="danger-btn hidden">Delete Timer</button>
      </div>

    </form>
  </div>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       OVERLAY: Milestone celebration card
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="milestone-overlay" class="milestone-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="milestone-title">
    <div class="milestone-card">
      <div class="confetti-burst" aria-hidden="true">
        <span></span><span></span><span></span>
        <span></span><span></span><span></span>
        <span></span><span></span><span></span>
      </div>
      <div class="milestone-badge" id="milestone-badge">ğŸ¯</div>
      <h3 id="milestone-title" class="milestone-title"></h3>
      <p id="milestone-message" class="milestone-message"></p>
      <button id="btn-close-milestone" class="primary-btn milestone-close-btn">Brilliant âœ“</button>
    </div>
  </div>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       OVERLAY: Photo position & zoom editor
       Full-screen editor that appears when the user
       taps the photo preview in the form.
       Drag to reposition, pinch to zoom.
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="photo-editor-overlay" class="photo-editor-overlay hidden" role="dialog" aria-modal="true" aria-label="Adjust photo position">

    <div class="photo-editor-header">
      <button type="button" id="btn-photo-editor-cancel" class="photo-editor-btn">Cancel</button>
      <span class="photo-editor-title">Adjust Photo</span>
      <button type="button" id="btn-photo-editor-done" class="photo-editor-btn photo-editor-btn--done">Done</button>
    </div>

    <!-- The viewport â€” clips the image to phone-screen proportions -->
    <div class="photo-editor-viewport" id="photo-editor-viewport">
      <!-- Grid overlay to help with positioning -->
      <div class="photo-editor-grid" aria-hidden="true">
        <div class="photo-editor-grid-line photo-editor-grid-line--v1"></div>
        <div class="photo-editor-grid-line photo-editor-grid-line--v2"></div>
        <div class="photo-editor-grid-line photo-editor-grid-line--h1"></div>
        <div class="photo-editor-grid-line photo-editor-grid-line--h2"></div>
      </div>
      <!-- The image being positioned â€” transform applied by JS -->
      <img id="photo-editor-img" class="photo-editor-img" alt="" draggable="false" />
    </div>

    <p class="photo-editor-hint">Drag to reposition Â· Pinch to zoom</p>

  </div>

  <script src="app.js"></script>
</body>
</html>
